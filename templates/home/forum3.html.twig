{% extends 'base.html.twig' %}

{% block child %}
<div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    if (value.trim() === "") {
      $(".myListItem").show();
    } else {
      $(".myListItem").filter(function() {
        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
      });
    }
  });
});
</script>
<div>
  <div class="sidebar-search">
    <div class="input-group custom-search-form">
      <input type="text" id="myInput" class="form-control" placeholder="Search here">
    </div>
    <br><br>
    <ul>
      {% for article in articles %}
        <li class="myListItem">{{ article.titre }}</li>
      {% endfor %}
    </ul>
  </div>
</div>


    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost/Eco-Collectes-Web/public/index.php/forum">All Categories</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost/Eco-Collectes-Web/public/index.php/forum1">Open Bar Questions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost/Eco-Collectes-Web/public/index.php/forum2">Recycling Categorie</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost/Eco-Collectes-Web/public/index.php/forum3">Announcements</a>
                    </li>
                </ul>
            </div>
            
        </div>
    </nav>
</div>

<a class="btn" href="{{ path('app_article_new') }}">Ajouter un nouvel article</a>

{% for article in articles %}
     {% if article.categorie.id == 4 %}

<div class="container mt-5">
    <!-- Question Section -->
    <div class="card mb-3">
        <div class="card-body">
            <div>
                <h5 class="card-title">{{ article.titre }}</h5>
                <div style="width: 50%;">
                    <img src="{{ asset('photo_directory/photo/' ~ article.photo) }}" width="50%">
                </div>
                <p class="card-text" style="font-size: 20px;">{{ article.contenu }}</p>
            </div>
            
                
            </div>

	<div class="container mt-5">
    <div class="card-header">
      Liste des Commentaires:</div>
    	
				<div>
                
					{% for commentaire in commentaires %}
                {% if commentaire.article.id == article.id %}
				<div class="card mb-3">
                <p class="card-text" style="font-size: 20px;">
                 {{ app.user.username }} commented on {{ commentaire.date_de_commentaire|date('Y-m-d H:i:s') }}:</p>
                 <p>{{ commentaire.ContenuCommentaire }}   </p>
				{% endif %}
                {% else %}
                <h8>No comment yet</h8>
				</div>
                {% endfor %}
            
        </div>
    	<div class="card-body">
		<div class="form-group">
		<form name="commentaire" method="post" novalidate="novalidate">         
          <label for="comment">Add a comment:</label>
		<textarea class="form-control" id="commentaire_ContenuCommentaire" name="commentaire[ContenuCommentaire]" required="required" maxlength="255"></textarea>
        <input type="hidden" id="commentaire_article" name="commentaire[article]" value="{{article.id}}" /></div>
		<input type="hidden" id="commentaire__token" name="commentaire[_token]" value="cf012.ZJCJQAck5SnCXQtMh8MXAHOi-zWLly5mHu5YF2XnW_s.IuX9BENnlBuIGHEI_otweSTMn2PM9B4ueqsTbQvKCLks3KR3fXyrH44RZA" /></div> 
		</div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    	</div>
  		</div>
    	</div>
	</div>
	{% endif %}	

{% else %}
<h8>No articles found</h8>

{% endfor %}
{% endblock %}
